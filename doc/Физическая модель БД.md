# Описание физической модели БД

## Player tables

```
users:
    PK<id:int>,
    IX<name:string(32)>,
    <pass_hash:string(128)>,
    <email:string(64)>,
    <phone:string(16)>
```

```
players:
    PK<id:int>,
    FK<user_id:int>,
    FK<status_id:int>,
    FK<visuals_id:int>,
    <name:string(32)>,
    <pass_hash:string(128)>,
    <reg_date:date>
```


## Player state tables

```
status:
    <id>,
    <displayname>
```

```
player_status:
    FK(<player_id>, <server_id>)
    <status_id>,
    <dist_datetime>,
    <exp_datetime>
```

```
roles:
    <id>,
    <name>,
    <description>
```

```
player_roles:
    FK(<player_id>, <server_id>),
    <role_id>
```


## Player visuals

```
visuals:
    <id>,
    <skin_id>,
    <cape_id>,
    <icon_id>,
    <name_color_id>,
    <chat_color_id>,
    <particle_id>
``` 

```
skins:
    <id>,
    <type>,
    <texture>
```

```
capes:
    <id>,
    <texture>
```

```
icons:
    <id>,
    <texture>
```

```
colors:
    <id>,
    <name>,
    <code>
```

```
particles:
    <id>,
    <name>,
    <description>
```


## Market items

```
item_type:
    <id>,
    <name>,
    <description>
```

```
trademarket_item:   
    PK(FK<type_id>, FK<item_id>),
    <name>,
    <description>
```

```
trademarket_lot:
    <id>,
    <trademarket_item_id>,
    <count>
```

## Server tables

```
server:
    <id>,
    <ip>,
    <name>,
    <icon>,
    <description>,
    <core_name>,
    <core_version>,
    <map_address>
```

```
server_status:
    <id>,
    <name>,
    <description>
```

```
server_state:
    <server_id>,
    <status_id>,
    <online>,
    <uptime>
```

```
plugins:
    <id>,
    <name>,
    <version>,
    <description>
```

```
server_plugins:
    <server_id>,
    <plugin_id>    
```

```
mods:
    <id>,
    <name>,
    <version>,
    <description>
```

```
server_mods:
    <server_id>,
    <mod_id>    
```